{% extends 'books/base.html' %}
{% load static %}

{% block title %}{{ category.name }} | Pustakam{% endblock %}

{% block content %}
<div class="container section-padding">
    <div class="section-header text-center mb-5">
        <h1 class="page-title">{{ category.name }}</h1>
        <p class="text-muted">Browse our collection of {{ category.name }}</p>
    </div>

    <div class="book-grid">
        {% for book in books %}
        <div class="book-card hover-lift">
            <div class="book-image">
                <a href="{% url 'book_detail' book.pk %}">
                    {% if book.image %}
                    <img src="{{ book.image.url }}" alt="{{ book.title }}">
                    {% else %}
                    <img src="https://via.placeholder.com/200x300?text=No+Image" alt="No Image">
                    {% endif %}
                </a>

            </div>
            <div class="book-info">
                <a href="{% url 'book_detail' book.pk %}" style="text-decoration: none; color: inherit;">
                    <h3>{{ book.title }}</h3>
                </a>
                <p class="author">{{ book.author }}</p>
                <div class="book-meta">
                    <span class="price">â‚¹{{ book.price }}</span>
                    <span class="condition badge-{{ book.condition|lower }}">{{ book.condition }}</span>
                </div>
                <!-- Add to cart -->
                <form action="{% url 'add_to_cart' book.id %}" method="get">
                    <button type="submit" class="btn btn-primary btn-full"><i class="fas fa-cart-plus"></i> Add to
                        Cart</button>
                </form>
            </div>
        </div>
        {% empty %}
        <div class="text-center w-100 p-5">
            <i class="fas fa-book-open fa-3x text-muted mb-3"></i>
            <p class="text-muted" style="font-size: 1.2rem;">No books found in this category yet.</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}